<Window x:Class="RobotPathPlanner.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:RobotPathPlanner.ViewModels"
        Title="Robot Path Planner"
        Width="900" Height="900">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <!-- 전체 레이아웃 -->
    <Grid>

        <!-- 맵 영역 -->
        <Canvas Background="White">
            <ItemsControl ItemsSource="{Binding Nodes}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Canvas.Left" Value="{Binding X}"/>
                        <Setter Property="Canvas.Top" Value="{Binding Y}"/>
                    </Style>
                </ItemsControl.ItemContainerStyle>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Rectangle Width="30"
                                   Height="30"
                                   Fill="{Binding Color}"
                                   Stroke="Black"
                                   MouseLeftButtonDown="OnNodeClicked"/>

                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <ItemsControl ItemsSource="{Binding Path_Segment}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Path Stroke="RosyBrown"
                  StrokeThickness="3">

                            <Path.Data>
                                <GeometryGroup>
                                    <LineGeometry StartPoint="{Binding From}"
                                      EndPoint="{Binding To}"/>
                                </GeometryGroup>
                            </Path.Data>
                        </Path>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>            
        </Canvas>

        <!-- 버튼 영역 (위에 덮어서 배치됨) -->
        <StackPanel Orientation="Horizontal"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Left"
                    Background="#AAFFFFFF">

            <Button Content="A* 실행"
                    Width="100"
                    Height="30"
                    Margin="5"
                    Command="{Binding RunAStarCommand}"/>

        </StackPanel>
        <StackPanel Orientation="Horizontal"
             VerticalAlignment="Center"
             HorizontalAlignment="Right"
             Background="#AAFFFFFF">

            <Button Content="초기화"
             Width="100"
             Height="30"
             Margin="5"
             Command="{Binding Initialize}" Click="Button_Click"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal"
             VerticalAlignment="Top"
             HorizontalAlignment="Right"
             Background="#AAFFFFFF">

            <Button Content="Wait/Resume"
             Width="100"
             Height="30"
             Margin="5"
             Command="{Binding PauseResume}"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal"
     VerticalAlignment="Top"
     HorizontalAlignment="Center"
     Background="#AAFFFFFF">

            <Button Content="Toggle RubberBanding"
     Width="100"
     Height="30"
     Margin="5"
     Command="{Binding RubberBand}" Click="Button_Click"/>
        </StackPanel>

        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">

            <Slider Width="234" Height="16"
            Minimum="0"
            Maximum="5000"
            TickFrequency="10"
            IsSnapToTickEnabled="True"
            Value="{Binding StepDelay, Mode=TwoWay}"
            Background="Salmon"/>

            <Label Content="{Binding StepDelay, StringFormat=Delay: \{0\} ms}"
           HorizontalAlignment="Center"/>

        </StackPanel>        
    </Grid>
</Window>
